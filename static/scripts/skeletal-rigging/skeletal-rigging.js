(()=>{"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=function(){function n(e,i,s,a,o){var h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;t(this,n),this.x=e*h,this.y=i*h,this.lineLength=s*h,this.angle=a,this.context=o,this.children=[],this.absoluteX=0,this.absoluteY=0,this.absoluteAngle=0,this.endX=0,this.endY=0,this.parent=null,this.calculateCoordinates()}var i,s;return i=n,(s=[{key:"addChild",value:function(t){t.parent=this,this.children.push(t)}},{key:"calculateCoordinates",value:function(){this.absoluteAngle=this.angle,this.parent?(this.absoluteAngle+=this.parent.absoluteAngle,this.absoluteX=-1*(this.x*Math.cos(this.parent.absoluteAngle)-this.y*Math.sin(this.parent.absoluteAngle)),this.absoluteY=-1*(this.x*Math.sin(this.parent.absoluteAngle)+this.y*Math.cos(this.parent.absoluteAngle)),this.absoluteX+=this.parent.endX,this.absoluteY+=this.parent.endY):(this.absoluteX=this.x,this.absoluteY=this.y),this.endX=this.absoluteX+this.lineLength*Math.cos(this.absoluteAngle),this.endY=this.absoluteY+this.lineLength*Math.sin(this.absoluteAngle),this.children.forEach((function(t){return t.calculateCoordinates()}))}},{key:"draw",value:function(){this.context.lineWidth=5,this.context.strokeStyle="#000000",this.context.beginPath(),this.context.moveTo(this.absoluteX,this.absoluteY),this.context.lineTo(this.endX,this.endY),this.context.stroke(),this.context.closePath(),this.context.lineWidth=2.5,this.context.strokeStyle="#0000FF",this.context.beginPath(),this.context.arc(this.endX,this.endY,10,0,2*Math.PI),this.context.stroke(),this.context.closePath(),this.children.forEach((function(t){return t.draw()}))}},{key:"pointToward",value:function(t,e){var n=t-this.absoluteX,i=e-this.absoluteY;this.angle=Math.atan2(i,n),this.parent&&(this.angle-=this.parent.absoluteAngle),this.calculateCoordinates()}},{key:"checkMouse",value:function(t,e){return Math.abs(t-this.endX)<=10&&Math.abs(e-this.endY)<=10}}])&&e(i.prototype,s),Object.defineProperty(i,"prototype",{writable:!1}),n}();function i(t){return t*(Math.PI/180)}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=function(){function t(e,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bones=[];var a=new n(300,320,200,i(270),e,s);this.bones.push(a);var o=new n(75,0,75,i(-90),e,s);a.addChild(o),this.bones.push(o);var h=new n(0,0,75,i(45),e,s);o.addChild(h),this.bones.push(h);var r=new n(75,0,75,i(90),e,s);a.addChild(r),this.bones.push(r);var l=new n(0,0,75,i(-45),e,s);r.addChild(l),this.bones.push(l);var u=new n(200,0,75,i(215),e,s);a.addChild(u),this.bones.push(u);var c=new n(0,0,75,i(-25),e,s);u.addChild(c),this.bones.push(c);var d=new n(200,0,75,i(-215),e,s);a.addChild(d),this.bones.push(d);var v=new n(0,0,75,i(25),e,s);d.addChild(v),this.bones.push(v),this.calculateCoordinates()}var e,a;return e=t,(a=[{key:"draw",value:function(){this.bones[0].draw()}},{key:"calculateCoordinates",value:function(){this.bones[0].calculateCoordinates()}}])&&s(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var h,r,l,u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.context=e.getContext("2d");var n=e.width/600;this.skeleton=new a(this.context,n),this.currentHoverBone=null,this.currentDragBone=null,this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.canvas.addEventListener("mousemove",this.handleMouseMove),this.canvas.addEventListener("touchmove",this.handleMouseMove),this.canvas.addEventListener("mousedown",this.handleMouseDown),this.canvas.addEventListener("touchstart",this.handleMouseDown),this.canvas.addEventListener("mouseup",this.handleMouseUp),this.canvas.addEventListener("touchend",this.handleMouseUp),this.canvas.addEventListener("touchcancel",this.handleMouseUp)}var e,n;return e=t,(n=[{key:"draw",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.skeleton.draw()}},{key:"handleMouseDown",value:function(t){var e=this.getEventCoordinates(t),n=e.x,i=e.y;this.currentDragBone=this.skeleton.bones.find((function(t){return t.checkMouse(n,i)}))}},{key:"handleMouseUp",value:function(){this.currentDragBone=null}},{key:"handleMouseMove",value:function(t){t.preventDefault();var e=this.getEventCoordinates(t),n=e.x,i=e.y;this.currentDragBone?(this.currentDragBone.pointToward(n,i),this.draw()):(this.currentHoverBone=this.skeleton.bones.find((function(t){return t.checkMouse(n,i)})),this.canvas.style.cursor=this.currentHoverBone?"pointer":"default")}},{key:"getEventCoordinates",value:function(t){var e,n,i=t.clientX||(null==t||null===(e=t.touches[0])||void 0===e?void 0:e.clientX),s=t.clientY||(null==t||null===(n=t.touches[0])||void 0===n?void 0:n.clientY),a=this.canvas.getBoundingClientRect();return{x:i-a.left,y:s-a.top}}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function c(t){t.innerHTML="";var e=document.createElement("canvas");e.style.border="1px solid",function(t){if(window.innerWidth<375)t.width=300,t.height=300;else if(window.innerWidth<850){var e=window.innerWidth/850*600;t.width=e,t.height=e}else t.width=600,t.height=600}(e),t.appendChild(e),new u(e).draw()}(h=document.getElementById("SkeletalRiggingContainer"))&&(c(h),window.addEventListener("resize",(r=function(){return c(h)},function(t){clearTimeout(l),l=setTimeout((function(){l=null,r()}),200)})))})();