(()=>{"use strict";function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var e=2*Math.PI,n=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.context=t,this.canvas=e,this.x=0,this.y=0,this.speed=0,this.turnSpeed=0,this.size=0,this.color="#000",this.direction=0}var r,i;return r=n,(i=[{key:"draw",value:function(){this.context.beginPath(),this.context.fillStyle=this.color,this.context.arc(this.x,this.y,this.size,0,e),this.context.fill(),this.context.closePath()}},{key:"move",value:function(){var t=this.speed*Math.cos(this.direction),e=this.speed*Math.sin(this.direction);this.x+=t,this.y+=e,this.keepInBounds()}},{key:"keepInBounds",value:function(){var t=this.x+this.size,e=this.x-this.size,n=this.y-this.size,r=this.y+this.size;t<0?this.x=this.canvas.width:e>this.canvas.width&&(this.x=0),r<0?this.y=this.canvas.height:n>this.canvas.height&&(this.y=0)}},{key:"getDistanceFromObject",value:function(t){var e=this.getXYDeltasFromObject(t),n=e.deltaX,r=e.deltaY;return Math.sqrt(n*n+r*r)}},{key:"getXYDeltasFromObject",value:function(t){var e=t.x,n=t.y;return Math.abs(this.x-e)>this.canvas.width/2&&(e+=this.x>e?this.canvas.width:-1*this.canvas.width),Math.abs(this.y-n)>this.canvas.height/2&&(n+=this.y>n?this.canvas.height:-1*this.canvas.height),{deltaX:e-this.x,deltaY:n-this.y}}},{key:"turnTowardPoint",value:function(t,n){var r=t-this.x,i=n-this.y,o=Math.atan2(i,r),a=(this.direction-o)%e;Math.abs(a)>Math.abs(this.direction-(o-e))&&(a=this.direction-(o-e)),Math.abs(a)<=this.turnSpeed?this.direction=o:a<0?this.direction+=this.turnSpeed:this.direction-=this.turnSpeed,this.direction%=e}}])&&t(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),n}();function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},o(t,e)}function a(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(h,t);var e,n,r,c,u=(r=h,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(r);if(c){var n=s(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return a(this,t)});function h(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(n=u.call(this,t,e)).speed=Math.round(2*Math.random()+6),n.turnSpeed=.025*Math.PI,n.x=20,n.y=200,n.size=8,n.color="#FF0000",n.targets=[],n.currentTarget=null,n}return e=h,(n=[{key:"findClosestTarget",value:function(){var t=this,e=this.targets.filter((function(t){return!t.dead}));this.currentTarget=null,e.length&&(this.currentTarget=e.reduce((function(e,n){return t.getDistanceFromObject(e)>t.getDistanceFromObject(n)?n:e})))}},{key:"chaseTarget",value:function(){if(this.currentTarget){this.getDistanceFromObject(this.currentTarget)-this.speed<this.size+this.currentTarget.size&&this.currentTarget.die();var t=this.getXYDeltasFromObject(this.currentTarget),e=t.deltaX,n=t.deltaY;this.turnTowardPoint(this.x+e,this.y+n),this.move()}}},{key:"update",value:function(){this.findClosestTarget(),this.chaseTarget()}}])&&i(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),h}(n);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},f(t,e)}function l(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(a,t);var e,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(r);if(i){var n=d(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return l(this,t)});function a(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=o.call(this,t,e)).calmSpeed=.5,r.fleeSpeed=Math.round(2*Math.random()+3),r.speed=0,r.x=Math.round(Math.random()*(e.width-20)+10),r.y=Math.round(Math.random()*(e.height-20)+10),r.size=5,r.color="#00FF00",r.fleeRange=100,r.swerveRange=75,r.dead=!1,r.turnSpeed=.5*Math.PI,r.hunter=n,r}return e=a,(n=[{key:"fleeHunter",value:function(){var t,e,n=this.getDistanceFromObject(this.hunter);if(n<this.fleeRange){this.speed=this.fleeSpeed;var r=this.getXYDeltasFromObject(this.hunter),i=r.deltaX,o=r.deltaY;if(n<this.swerveRange){var a=-.25*Math.PI;t=i*Math.cos(a)-o*Math.sin(a),e=i*Math.sin(a)+o*Math.cos(a)}else t=i,e=o}else this.speed=this.calmSpeed,t=2*Math.random()-1,e=2*Math.random()-1;this.turnTowardPoint(this.x-t,this.y-e),this.move()}},{key:"die",value:function(){this.dead=!0,this.color="#558855"}},{key:"update",value:function(){this.dead||this.fleeHunter()}}])&&h(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(n);function p(t){if(window.innerWidth<375)t.width=300,t.height=300;else if(window.innerWidth<850){var e=window.innerWidth/850*600;t.width=e,t.height=e}else t.width=600,t.height=600}!function(){var t=document.createElement("canvas");p(t);var e,n,r=document.getElementById("hunterContainer");r&&(r.appendChild(t),function(t){for(var e,n=t.getContext("2d"),r=new c(n,t),i=[],o=0;o<15;o++)i.push(new y(n,t,r));r.targets=i,function o(a){e||(e=a),a-e>16.7&&(n.fillStyle="#D2B48C",n.fillRect(0,0,t.width,t.height),i.forEach((function(t){return t.update()})),r.update(),i.forEach((function(t){return t.draw()})),r.draw(),e=a),window.requestAnimationFrame(o)}()}(t),window.addEventListener("resize",(e=function(){return p(t)},function(t){clearTimeout(n),n=setTimeout((function(){n=null,e()}),200)})))}()})();